<extend name="Public:admin_base" />

<block name="body_main">

<div class="subnav">
    <div class="content_menu ib_a blue line_x">
        <notempty name="big_menu">
        <a class="add fb J_showdialog" href="javascript:void(0);" data-uri="{$big_menu.iframe}" data-title="{$big_menu.title}" data-id="{$big_menu.id}" data-width="{$big_menu.width}" data-height="{$big_menu.height}"><em>{$big_menu.title}</em></a>　
        </notempty>
        <notempty name="sub_menu">
        <volist name="sub_menu" id="val" key="key">
            <if condition="$key neq 1"><span>|</span></if>
            <a href="{:U($val['module_name'].'/'.$val['action_name'],array('menuid'=>$menuid))}/{$val.data}" class="{$val.class}"><em>{$val['name']}</em></a>
        </volist>
        </notempty>
    </div>
</div>


    <div class="J_tablelist table_list" data-acturi="{:U('menu/ajax_edit')}">
        <table width="100%" cellspacing="0">
            <thead>
            <tr>
                <th width="40"><input type="checkbox" name="checkall" class="J_checkall"></th>
                <th width="40"><span tdtype="order_by" fieldname="id">ID</span></th>
                <th>{:L('menu_name')}</th>
                <th><span tdtype="order_by" fieldname="ordid">{:L('sort_order')}</span></th>
                <th>禁用</th>
                <th>日志监控</th>
                <th width="160">{:L('operations_manage')}</th>
            </tr>
            </thead>
           <tbody>
            {$menu_list}
           </tbody>
        </table>
    </div>
    <div class="btn_wrap_fixed">
        <label class="select_all"><input type="checkbox" name="checkall" class="J_checkall">{:L('select_all')}/{:L('cancel')}</label>
        <input type="button" class="btn" data-tdtype="batch_action" data-acttype="ajax" data-uri="{:U('menu/delete')}" data-name="id" data-msg="{:L('confirm_delete')}" value="{:L('delete')}" />
        <div id="pages">{$page}</div>
    </div>


</block>


<block name="footerjs">
<style>
/*弹窗CSS*/
.m-alert{padding:8px; margin:10px auto; border-radius:10px; background-color:rgba(255, 255, 255, 0.3); position: relative; top: 40px;}
.inn-bgc-white{ background-color:#fff; border-radius:10px;}
.g-alert-hd{padding:0 25px; height:40px; line-height: 40px; background-color:#fafafa; border-top-left-radius: 10px; border-top-right-radius: 10px;}
.g-alert-hd h3{display: block;width: 97%;height: 100%;float:left; font: bold 14px/40px "\5FAE\8F6F\96C5\9ED1"; color: #666;}
.g-alert-hd span{float:right; color: #666; line-height: 40px; cursor: pointer;}
.g-alert-ct{ overflow: hidden;height:auto; padding:10px 25px; background-color: #fff; border-bottom-left-radius: 10px; border-bottom-right-radius: 10px; color:#333 ; }
.g-alert-ct li{width: auto;}
.g-alert-ct input[type="text"]{ z-index: 10; border-radius:4px; -moz-box-shadow:0 0 4px #e0e0e0 inset;-webkit-box-shadow:0 0 4px #e0e0e0 inset; box-shadow:0 0 4px #e0e0e0 inset; }
</style>>


<script>
    //弹窗表单
    $('.J_showdialog').live('click', function(){

        // var d = dialog({
        //     title: '欢迎',
        //     content: '欢迎使用 artDialog 对话框组件！'
        // });
        // d.show();

        var self = $(this),
            dtitle = self.attr('data-title'),
            did = self.attr('data-id'),
            duri = self.attr('data-uri'),
            dwidth = parseInt(self.attr('data-width')),
            dheight = parseInt(self.attr('data-height')),
            dpadding = (self.attr('data-padding') != undefined) ? self.attr('data-padding') : '',
            dcallback = self.attr('data-callback');


        $.getJSON(duri, function(result){
            if(result.status == 1){
                //$.dialog.get(did).content(result.data);
                var d = dialog({
                    title: '欢迎',
                    content: result.data
                });
                d.show();

            }
        });



        // $.dialog({id:did}).close();
        // $.dialog({
        //     id:did,
        //     title:dtitle,
        //     width:dwidth ? dwidth : 'auto',
        //     height:dheight ? dheight : 'auto',
        //     padding:dpadding,
        //     lock:true,
        //     ok:function(){
        //         var info_form = this.dom.content.find('#info_form');
        //         if(info_form[0] != undefined){
        //             info_form.submit();
        //             if(dcallback != undefined){
        //                 eval(dcallback+'()');
        //             }
        //             return false;
        //         }
        //         if(dcallback != undefined){
        //             eval(dcallback+'()');
        //         }
        //     },
        //     cancel:function(){}
        // });
        // $.getJSON(duri, function(result){
        //     if(result.status == 1){
        //         $.dialog.get(did).content(result.data);
        //     }
        // });
        return false;
    });
</script>

</block>


<include file="Public:header" />
<!--菜单列表-->
<div class="pad_lr_10">
    <div class="J_tablelist table_list" data-acturi="{:U('menu/ajax_edit')}">
        <table width="100%" cellspacing="0">
            <thead>
            <tr>
                <th width="40"><input type="checkbox" name="checkall" class="J_checkall"></th>
                <th width="40"><span tdtype="order_by" fieldname="id">ID</span></th>
      			<th>{:L('menu_name')}</th>
                <th><span tdtype="order_by" fieldname="ordid">{:L('sort_order')}</span></th>
                <th>禁用</th>
                <th>日志监控</th>
                <th width="160">{:L('operations_manage')}</th>
            </tr>
            </thead>
    	   <tbody>
            {$menu_list}
    	   </tbody>
        </table>
    </div>
    <div class="btn_wrap_fixed">
        <label class="select_all"><input type="checkbox" name="checkall" class="J_checkall">{:L('select_all')}/{:L('cancel')}</label>
        <input type="button" class="btn" data-tdtype="batch_action" data-acttype="ajax" data-uri="{:U('menu/delete')}" data-name="id" data-msg="{:L('confirm_delete')}" value="{:L('delete')}" />
        <div id="pages">{$page}</div>
    </div>
</div>
<include file="Public:footer" />
</body>
</html>